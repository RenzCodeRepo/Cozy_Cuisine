@model Cozy_Cuisine.ViewModels.ContactsVM

@{
    Layout = "_Layout"; 
    ViewData["Title"] = "Contacts";
}
<div class="accordion" id="faqAccordion">
    @if (Model.FAQs != null && Model.FAQs.Any())
    {
        @foreach (var faq in Model.FAQs)
        {
            <div class="accordion-item mb-3">
                <h2 class="accordion-header" id="heading-@faq.FAQId">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-@faq.FAQId" aria-expanded="false" aria-controls="collapse-@faq.FAQId">
                        @faq.Question
                    </button>
                </h2>
                <div id="collapse-@faq.FAQId" class="accordion-collapse collapse" aria-labelledby="heading-@faq.FAQId" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        <p>@faq.Answer</p>

                        @if (!string.IsNullOrEmpty(faq.FAQURLImageList))
                        {
                            <div class="mt-2">
                                <strong>Related Links:</strong>
                                <ul class="list-unstyled">
                                    @foreach (var url in faq.FAQURLImageList.Split(','))
                                    {
                                        <li>
                                            <a href="@url" target="_blank">@url</a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        }
                    </div>
                </div>
                
            </div>
        }
    }
</div>

<h4>Contact</h4>
<form id="messageForm" method="post" asp-controller="Home" asp-action="SendMessage" onsubmit="confirmSubmit(event, 'messageForm')">
    <div>
        <label asp-for="NewContacts.EmailSubject">Subject</label>
        <input type="text" asp-for="NewContacts.EmailSubject" class="form-control" placeholder="Enter Subject Message" required />
    </div>
    <div>
        <label asp-for="NewContacts.EmailBody">Message</label>
        <textarea type="text" asp-for="NewContacts.EmailBody" class="form-control" rows="5" placeholder="Enter Message" required ></textarea>
    </div>

    <div>
        <label asp-for="NewContacts.EmailAddress"></label>
        <input type="text" asp-for="NewContacts.EmailAddress" class="form-control" placeholder="Enter your email address if you're expecting a reply (Optional):" />
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</form>


<h4>Bug Report</h4>
<form id="bugReportForm" method="post" asp-controller="Home" asp-action="SendBugReport" onsubmit="confirmSubmit(event, 'bugReportForm')">

    <div>
        <label asp-for="NewBugReport.PatchId">Patch Version</label>
        <select asp-for="NewBugReport.PatchId" class="form-control" required>
            <option value="">Select Patch Version</option>
            @foreach (var patch in Model.PatchesDict)
            {
                <option value="@patch.Value">@patch.Key</option>
            }
        </select>
    </div>
    <div>
        <label asp-for="NewBugReport.BugTitle">Issue</label>
        <input type="text" asp-for="NewBugReport.BugTitle" class="form-control" placeholder="Enter the Issue/Bug" required />
    </div>
    <div>
        <label asp-for="NewBugReport.BugDescription">Description</label>
        <textarea type="text" asp-for="NewBugReport.BugDescription" class="form-control" rows="5" placeholder="Describe the issue..." required></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</form>

@section Scripts{
<script>
    function confirmSubmit(event, formId) {
        event.preventDefault(); // Prevent the default form submission

        Swal.fire({
            title: "Are you sure?",
            text: "Do you want to proceed with this submission?",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Yes, submit it!"
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById(formId).submit(); // Submit the correct form
            }
        });
    }
</script>
}